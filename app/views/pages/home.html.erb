<div class="container">
    <p class="lorem m-3">Lost In Vote propose un questionnaire sur les positions politiques des utilisateurs.
        <br>Les questions portent sur des sujets tels que l'économie, l'environnement et les droits de l'homme.
        <br>Les réponses des utilisateurs sont ensuite utilisées pour proposer des partis politiques et des candidats qui correspondent le mieux à leurs opinions.
        <br>Le site vise à aider les électeurs à prendre des décisions éclairées lors des élections.</p>
    <% if @winner %>
    <a href="/questionnaires/new" class="button-30">Refaire le test</a>
    <hr>
    <h1>Candidat vous correpondant</h1>
    <% console %>
        <div class="card">
            <%= link_to candidat_path(@winner), :action => 'go' do %>
                <div class="container_card">
                    <%= cl_image_tag @winner.photo.key, class: "image_candidat" %>
                    <div class="container__profile">
                        <div class="container__profile__text">
                            <h2><%= @winner.first_name %> <%= @winner.last_name.upcase() %></h2>
                            <p><%= @winner.partie %></p>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    <% else %>
    <a href="/questionnaires/new" class="button-30">Démarrer</a>
    <hr>
        <div class="card">
            <% @candidats.each do |candidat| %>
                <%= link_to candidat_path(candidat), :action => 'go' do %>
                    <div class="container_card">
                        <%= cl_image_tag candidat.photo.key, class: "image_candidat" %>
                        <div class="container__profile">
                            <div class="container__profile__text">
                                <h2><%= candidat.first_name %> <%= candidat.last_name.upcase() %></h2>
                                <p><%= candidat.partie %></p>
                            </div>
                        </div>
                    </div>
                <% end %>
            <% end %>
        </div>
    <% end %>
</div>

<div class="carousel">
  <ul class="carousel__list" data-controller="candidats-card" data-action="click->candidats-card#moveCard">
    <% @candidats.each_with_index do |candidat, index| %>

        <% if index == 0 %>
            <div class="carousel__item" data-pos="-2">
                <%= cl_image_tag candidat.photo.key, class: "image_candidat --from-carousel" %>
            </div>

        <% elsif index == 1 %>
            <div class="carousel__item" data-pos="-1">
                <%= cl_image_tag candidat.photo.key, class: "image_candidat --from-carousel" %>
            </div>
        <% elsif index == 2 %>
            <div class="carousel__item" data-pos="0">
                <%= cl_image_tag candidat.photo.key, class: "image_candidat --from-carousel" %>
            </div>
        <% elsif index == 3 %>
            <div class="carousel__item" data-pos="1">
                <%= cl_image_tag candidat.photo.key, class: "image_candidat --from-carousel" %>
            </div>
        <% elsif index == 4 %>
            <div class="carousel__item" data-pos="2">
                <%= cl_image_tag candidat.photo.key, class: "image_candidat --from-carousel" %>
            </div>
        <% end %>
    <% end %>
  </ul>
</div>
